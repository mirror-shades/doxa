module g from "graphics"

entry function main() {
    const rl is g.raylib
    const dg is g.doxa
    
    const WIDTH is 800
    const HEIGHT is 600
    const FPS is 60
    const NAME is "Working Graphics Demo"
    
    // doxa has a simplified API for initializing graphics
    // Initialize graphics (defers CloseWindow automatically)
    dg.Init(WIDTH, HEIGHT, FPS, NAME)
    
    var frame_count :: int
    
    while dg.Running() {
        // Begin drawing (defers EndDrawing automatically)
        dg.Draw()

        // raylib is still available        
        if (frame_count % 200 < 100) then {
            rl.ClearBackground(rl.GRAY)
        } else {
            rl.ClearBackground(rl.LIGHTGRAY)
        } 
        
        const circle_x is (frame_count * 4) % 800 
        const circle_y is (frame_count * 3) % 600
        rl.DrawCircle(circle_x, circle_y, 30, rl.ORANGE)
        
        frame_count += 1
    }    
}
