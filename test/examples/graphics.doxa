module g from "graphics"

entry function main() {
    const rl is g.raylib
    const dg is g.doxa
    
    const w is 800
    const h is 600
    const fps is 60
    const name is "Working Graphics Demo"
    
    // doxa has a simplified API for initializing graphics
    // Initialize graphics (defers CloseWindow automatically)
    var app is dg.Init(w, h, fps, name)
    
    var frame_count is 0
    
    while app.running {
        // Begin drawing (defers EndDrawing automatically)
        dg.Draw()

        // raylib is still available        
        if (frame_count % 200 < 100) then {
            rl.ClearBackground(rl.GRAY)
        } else {
            rl.ClearBackground(rl.LIGHTGRAY)
        } 
        
        const circle_x is (frame_count * 4) % 800 
        const circle_y is (frame_count * 3) % 600
        rl.DrawCircle(circle_x, circle_y, 30, rl.ORANGE)
        
        frame_count is frame_count + 1
    }    
}
